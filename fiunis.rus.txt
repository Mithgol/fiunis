**********************************************************************
FGHI                                FIDONET GLOBAL HYPERTEXT INTERFACE
**********************************************************************
Статус:         черновик
Номер редакции: первоначальный неоконченный черновик
Заглавие:       Фидонетовские подстроки Unicode
Автор:          Mithgol the Webmaster   (aka Sergey Sokoloff, 2:50/88)
Дата редакции:  28 Jul 2014
-+--------------------------------------------------------------------
Содержание:
   1. Статус этого документа
   2. Введение
   3. Ключевые слова для выражения уровней требуемости
   4. Восьмибитное кодирование фидонетовского сообщения,
      содержащего подстроки Unicode
   5. Декодирование восьмибитного фидонетовского сообщения,
      содержащего подстроки Unicode
   6. Важные примечания
-+--------------------------------------------------------------------

1. Статус этого документа
-+-----------------------

  Этот документ является переводом на русский язык, соответствующим
  черновику Предлагаемого Фидонетовского Стандарта (FSP).

  Оригинал этого документа описывает необязательный фидонетовский
  стандарт, который может использоваться фидошным сообществом.

  Реализация стандарта, определённого в этом документе, не является
  необходимою; но ожидается, что все реализации будут соответствовать
  данному стандарту.

  Распространение этого документа не ограничивается, если в его текст
  при распространении не будут внесены изменения, не упомянутые явно.

2. Введение
-+---------

  Многие классические редакторы почты Фидонета (такие, как GoldED+,
  например) были спроектированы как восьмибитные приложения. Они
  ожидают, что каждый символ фидонетовского сообщения кодируется одним
  байтом. Следовательно, они никогда не будут поддерживать кодировки
  Unicode UTF-8 или UTF-16.

  Эта ситуация является проблемою типа "курица или яйцо". Сообщения
  в кодировке UTF-8 не появляются в Фидонете, так как ни одним из
  популярных читальников они никогда не будут прочитаны. С другой
  стороны, отсутствие таковых сообщений означает, что у разработчиков
  популярных читальников нет нужды развивать свой софт, а у их
  пользователей нет нужды обновлять свои читальники или выбирать
  какие-либо новые (поддерживающие Unicode) читальники.

  Этот документ определяет простой метод, который позволяет
  подстрокам Unicode появляться (в кодированном и экранированном виде)
  внутри восьмибитных строк.

  Метод кодирования основан на формате UTF-7 (RFC 2152).

  Метод экранирования вдохновлён ссылками на символы HTML (HTML 4.01б
  подраздел 5.3.1, подраздел 5.3.2).

  Реализацией этого метода достигается следующая ситуация:

  *) Пользователи новых (поддерживающих Unicode) приложений Фидонета
     могут читать и записывать подстроки Unicode в восьмибитных
     сообщениях.

  *) Пользователи старых (восьмибитных) приложений Фидонета могут
     читать восьмибитные части сообщения. Подстроки Unicode остаются
     неразборчивыми, но для восьмибитного приложения это естественно,
     и причиняет лишь небольшое неудобство, и послужит как побуждение
     к апгрейду.

3. Ключевые слова для выражения уровней требуемости
-+-------------------------------------------------
  
  Ключевые слова "MUST", "MUST NOT", "REQUIRED", "SHALL", "SHALL NOT",
  "SHOULD", "SHOULD NOT", "RECOMMENDED", "NOT RECOMMENDED", "MAY" и
  "OPTIONAL" в оригинале этого документа имеют смысл, соответствующий
  описаниям в стандарте FTA-1006 (основанном на RFC 2119).

  В этом русском переводе используются следующие ключевые выражения:

  "MUST"            : "ДОЛЖЕН", "НАДО"
  "MUST NOT"        : "НЕ ДОЛЖЕН"
  "REQUIRED"        : "НЕОБХОДИМЫЙ", "ТРЕБУЕМЫЙ", "ТРЕБУЕТСЯ"
  "SHOULD"          : "НАДОБНО", "СЛЕДУЕТ"
  "SHOULD NOT"      : "НЕ СЛЕДУЕТ"
  "RECOMMENDED"     : "РЕКОМЕНДУЕМЫЙ", "РЕКОМЕНДУЕТСЯ"
  "NOT RECOMMENDED" : "НЕ РЕКОМЕНДУЕТСЯ"
  "MAY"             : "МОЖЕТ", "МОЖНО"
  "OPTIONAL"        : "НЕОБЯЗАТЕЛЬНЫЙ"

4. Восьмибитное кодирование фидонетовского сообщения,
   содержащего подстроки Unicode
-+---------------------------------------------------

  

5. Декодирование восьмибитного фидонетовского сообщения,
   содержащего подстроки Unicode
-+------------------------------------------------------

  Прежде всего сообщение декодируется традиционным восьмибитным
  декодером, каждый байт декодируется в один символ.

  Кодированные подстроки Unicode затем обнаруживаются в сообщении
  (с использованием их уникальной формы: амперсанд, затем плюс, затем
  один или более из символов base64, затем точка с запятою)
  и заменяются на их декодированные аналоги.

  Для поиска этих кодированных форм может быть полезным нижеследующее
  PECL (Perl-совместимое регулярное выражение):

      /&\+[A-Za-z01-9+\/]+;/

  Для их декодирования ДОЛЖЕН использоваться некоторый
  RFC2152-совместимый декодер UTF-7. (Как объясняется в предыдущем
  разделе, фидонетовские подстроки Unicode используют кодировку UTF-7
  с другою экранировкою. Если декодер ожидает RFC2152-совместимую
  экранировку, то амперсанд ДОЛЖЕН быть убран и точка с запятою
  ДОЛЖНА быть заменена на минус перед тем, как подстрока передаётся
  декодеру.)

6. Важные примечания
-+------------------

  

**********************************************************************
EOTD                                               END OF THE DOCUMENT
**********************************************************************